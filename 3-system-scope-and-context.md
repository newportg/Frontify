# 3, System Scope and Context

## Business Context

A internal user will have the ability to pass property, text and image information, to this service and receive a brochure that complies with our current marketing guidelines. The user will also have the ability to specify if they want the brochure to be autogenerated or created by hand. The quality and speed being a trade off the transaction owner will have to make. The MarComm(marketing and communications) department will create brochure templates and maintain them to the current standards.

```plant-uml
{% raw %}
{% plantuml %}
Bob->Alice : hello
{% endplantuml %}
{% endraw %}
```



```plantuml
@startuml
!include <C4/C4_Container>

LAYOUT_WITH_LEGEND()
LAYOUT_LEFT_RIGHT()
AddElementTag("microService", $shape=EightSidedShape(), $fontColor="white", $legendText="micro service\neight sided")
AddElementTag("storage", $shape=RoundedBoxShape(), $fontColor="white")

SHOW_PERSON_OUTLINE()
Person( user, User, "A User")
System(ns, "Knight Frank System") 
System(app, "Brochure Service", "Allows users to create brochures", $tags = "microService")  
SystemDb(cosmos, "CosmosDB", "Content Managemnt Storage", $tags = "storage")
System_Ext(frontify, "Frontify", "External Brochure generation service")

Rel(user, ns, "Selects activity for brochure generation", "Https")
Rel(ns, app, " Uses the brochure service", "Https")
Rel(app, frontify, "Generate Brochure", "Https")
Rel(app, cosmos, "Cache usage detail ")

@enduml
```

## Technical Context

```plantuml
@startuml System
!include <C4/C4_Container>

LAYOUT_WITH_LEGEND()
LAYOUT_LEFT_RIGHT()

AddElementTag("microService", $shape=EightSidedShape(), $fontColor="white", $legendText="micro service\neight sided")
AddElementTag("storage", $shape=RoundedBoxShape(), $fontColor="white")


System_Boundary(c1, "Knight Frank") {
    System(hub, "Hub", "Internal Residential Transaction")
    System(ns, "NorthStar", "Hub Next")   

    System_Boundary(auth, "Managed Identity") {
        System(app, "Brochure Service", "Allows users to generate brochures", $tags = "microService")    
        SystemDb(cosmos, "CosmosDB", "Content Managemnt Storage", $tags = "storage")

    }
}

System_Ext(extFrontify, "Frontify", "External Marketing Material Generation serivce")

Rel(hub, app, "Selects activity for brochure generation", "Https")
Rel(ns, app, "Selects activity for brochure generation", "Https")
Rel(app, cosmos, "Get previously cached Brochure Detail ")
Rel(app, extFrontify, "Genreate Brocure", "Https")


@enduml
```

* The API runs as a microservice on our cloud platform, and will be accessible via a API Management interface.
* The connection to the external Address provider is over HTTPS, secured by OAuth2.
* The data passed in this application is not sensitive and doesn't need any encryption protocols.
* Any data retuned by the external provider will be stored, by our document management and scanned for viruses.
* A service bus interface will be available, for asynchronous queueing of jobs.
* A http interface will be available, for ad-hoc querying of information.

| Business Interface         | Channel          |
| -------------------------- | ---------------- |
| API for business functions | internet (https) |
| API for admin / audit      | internet (https) |
| Bulk Updates               | Service Bus      |
